<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard de Restricciones Laborales - Plasticaucho</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1>üè≠ Dashboard de Restricciones Laborales</h1>
                <p class="subtitle">Plasticaucho Industrial - Gesti√≥n de Salud Ocupacional</p>
            </div>
            <button class="export-btn" onclick="exportToExcel()">
                üìä Exportar a Excel
            </button>
        </header>

        <!-- Filtros -->
        <section class="filters-section">
            <div class="filters">
                <div class="filter-group">
                    <label for="filterArea">üè¢ √Årea</label>
                    <select id="filterArea" onchange="applyFilters()">
                        <option value="">Todas las √°reas</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="filterGerencia">üëî Gerencia</label>
                    <select id="filterGerencia" onchange="applyFilters()">
                        <option value="">Todas las gerencias</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="filterTipo">‚è±Ô∏è Tipo de Restricci√≥n</label>
                    <select id="filterTipo" onchange="applyFilters()">
                        <option value="">Todos los tipos</option>
                        <option value="Temporal">Temporal</option>
                        <option value="Definitiva">Definitiva</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="filterClassificacion">üìã Nivel de Acci√≥n</label>
                    <select id="filterClassificacion" onchange="applyFilters()">
                        <option value="">Todas las acciones</option>
                        <option value="Inmediata">Acc. Inmediatas</option>
                        <option value="MedioPlazo">Acc. Medio Plazo</option>
                        <option value="Definitiva">Acc. Definitivas</option>
                    </select>
                </div>
                <button class="reset-btn" onclick="resetFilters()">üîÑ Limpiar Filtros</button>
            </div>
        </section>

        <!-- KPIs -->
        <section class="kpis">
            <div class="kpi-card total">
                <div class="kpi-icon">üë•</div>
                <div class="kpi-content">
                    <h3 id="kpiTotal">103</h3>
                    <p>Total Restricciones</p>
                </div>
            </div>
            <div class="kpi-card temporal">
                <div class="kpi-icon">‚è≥</div>
                <div class="kpi-content">
                    <h3 id="kpiTemporal">0</h3>
                    <p>Temporales</p>
                </div>
            </div>
            <div class="kpi-card definitiva">
                <div class="kpi-icon">üîí</div>
                <div class="kpi-content">
                    <h3 id="kpiDefinitiva">0</h3>
                    <p>Definitivas</p>
                </div>
            </div>
            <div class="kpi-card percentage">
                <div class="kpi-icon">üìä</div>
                <div class="kpi-content">
                    <h3 id="kpiPercentage">0%</h3>
                    <p>% Temporales</p>
                </div>
            </div>
        </section>

        <!-- Gr√°ficos -->
        <section class="charts-section">
            <div class="chart-container">
                <h3>Distribuci√≥n por Tipo</h3>
                <canvas id="tipoChart"></canvas>
            </div>
            <div class="chart-container">
                <h3>Restricciones por √Årea</h3>
                <canvas id="areaChart"></canvas>
            </div>
            <div class="chart-container">
                <h3>Restricciones por Gerencia</h3>
                <canvas id="gerenciaChart"></canvas>
            </div>
        </section>

        <!-- Tabla de Detalles -->
        <section class="table-section">
            <div class="table-header">
                <h3>üìã Detalle de Empleados con Restricciones</h3>
                <input type="text" id="searchInput" placeholder="üîç Buscar por c√≥digo o nombre..."
                    onkeyup="searchTable()">
            </div>
            <div class="table-wrapper">
                <table id="employeeTable">
                    <thead>
                        <tr>
                            <th onclick="sortTable(0)">C√≥digo ‚Üï</th>
                            <th onclick="sortTable(1)">Nombre ‚Üï</th>
                            <th onclick="sortTable(2)">Tipo ‚Üï</th>
                            <th onclick="sortTable(3)">√Årea ‚Üï</th>
                            <th onclick="sortTable(4)">Gerencia ‚Üï</th>
                            <th onclick="sortTable(5)">Fecha Inicio ‚Üï</th>
                            <th onclick="sortTable(6)">Fecha Fin ‚Üï</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <!-- Se llenar√° din√°micamente -->
                    </tbody>
                </table>
            </div>
        </section>
    </div>

    <!-- Modal de Detalles -->
    <div id="detailModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2 id="modalTitle">Detalles del Empleado</h2>
            <div id="modalBody"></div>
        </div>
    </div>

    <script src="data.js"></script>
    <script src="app.js"></script>
</body>

</html>